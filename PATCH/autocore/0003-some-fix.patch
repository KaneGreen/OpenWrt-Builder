From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: KaneGreen <737445366KG@Gmail.com>
Date: Mon, 17 Sep 2001 00:00:00 +0000
Subject: [PATCH] fix script

---
 autocore/files/autocore                      | 12 ++----------
 autocore/files/luci-mod-status-autocore.json |  2 +-
 2 files changed, 3 insertions(+), 11 deletions(-)

diff --git a/autocore/files/autocore b/autocore/files/autocore
index 1fcb9dc..083c167 100755
--- a/autocore/files/autocore
+++ b/autocore/files/autocore
@@ -5,23 +5,15 @@ START=99
 
 start() {
 	rfc=4096
-	threads="$(grep -c "processor" "/proc/cpuinfo")"
+	threads="$(grep -c 'processor' '/proc/cpuinfo')"
 
 	sysctl -w net.core.rps_sock_flow_entries="$(( rfc * threads ))"
 
-	for fileRps in /sys/class/net/eth*/queues/rx-*/rps_cpus
-	do
-		echo "$threads" > "$fileRps"
-	done
-
 	for fileRfc in /sys/class/net/eth*/queues/rx-*/rps_flow_cnt
 	do
 		echo "$rfc" > "$fileRfc"
 	done
 
-	uci set network.@globals[0].packet_steering="1"
-	uci commit network
-
 	for i in $(ip address | awk -F ': ' '/eth[0-9]+/ {print $2}' | xargs)
 	do
 		{
@@ -36,4 +28,4 @@ start() {
 			ethtool -K "$i" ufo on
 		}
 	done
-} >"/dev/null" 2>&1
+} >/dev/null 2>&1
diff --git a/autocore/files/luci-mod-status-autocore.json b/autocore/files/luci-mod-status-autocore.json
index 5dfd32f..ede985f 100644
--- a/autocore/files/luci-mod-status-autocore.json
+++ b/autocore/files/luci-mod-status-autocore.json
@@ -3,7 +3,7 @@
 		"description": "Grant access to autocore",
 		"read": {
 			"ubus": {
-				"luci": [ "getCPUInfo", "getTempInfo" ],
+				"luci": [ "getCPUInfo", "getTempInfo", "getETHInfo", "getCPUBench", "getCPUUsage" ],
 				"network.device": [ "status" ]
 			}
 		}
